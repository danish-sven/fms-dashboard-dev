{"ast":null,"code":"import { Model } from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl) {\n    let props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super(props);\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n    this.bounds = null;\n    this.managedResources = props.managedResources || [];\n  }\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n  getBounds() {\n    return this.bounds;\n  }\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n  draw() {\n    return this.model.draw(...arguments);\n  }\n  setUniforms() {\n    this.model.setUniforms(...arguments);\n    return this;\n  }\n  setAttributes() {\n    this.model.setAttributes(...arguments);\n    return this;\n  }\n  updateModuleSettings() {\n    this.model.updateModuleSettings(...arguments);\n    return this;\n  }\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}","map":{"version":3,"names":["Model","ScenegraphNode","ModelNode","constructor","gl","props","arguments","length","undefined","onBeforeRender","AfterRender","model","_setModelNodeProps","bounds","managedResources","setProps","getBounds","delete","forEach","resource","draw","setUniforms","setAttributes","updateModuleSettings"],"sources":["../../../src/scenegraph/model-node.js"],"sourcesContent":["import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.bounds = null;\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  getBounds() {\n    return this.bounds;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,iBAApB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AAEA,eAAe,MAAMC,SAAN,SAAwBD,cAAxB,CAAuC;EACpDE,WAAWA,CAACC,EAAD,EAAiB;IAAA,IAAZC,KAAY,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAJ,EAAI;IAC1B,MAAMD,KAAN;IAGA,KAAKI,cAAL,GAAsB,IAAtB;IACA,KAAKC,WAAL,GAAmB,IAAnB;IAGA,IAAIN,EAAE,YAAYJ,KAAlB,EAAyB;MACvB,KAAKW,KAAL,GAAaP,EAAb;MACA,KAAKQ,kBAAL,CAAwBP,KAAxB;IACD,CAHD,MAGO;MACL,KAAKM,KAAL,GAAa,IAAIX,KAAJ,CAAUI,EAAV,EAAcC,KAAd,CAAb;IACD;IAED,KAAKQ,MAAL,GAAc,IAAd;IACA,KAAKC,gBAAL,GAAwBT,KAAK,CAACS,gBAAN,IAA0B,EAAlD;EACD;EAEDC,QAAQA,CAACV,KAAD,EAAQ;IACd,MAAMU,QAAN,CAAeV,KAAf;IACA,KAAKO,kBAAL,CAAwBP,KAAxB;IACA,OAAO,IAAP;EACD;EAEDW,SAASA,CAAA,EAAG;IACV,OAAO,KAAKH,MAAZ;EACD;EAEDI,MAAMA,CAAA,EAAG;IACP,IAAI,KAAKN,KAAT,EAAgB;MACd,KAAKA,KAAL,CAAWM,MAAX;MACA,KAAKN,KAAL,GAAa,IAAb;IACD;IAED,KAAKG,gBAAL,CAAsBI,OAAtB,CAA8BC,QAAQ,IAAIA,QAAQ,CAACF,MAAT,EAA1C;IACA,KAAKH,gBAAL,GAAwB,EAAxB;EACD;EAGDM,IAAIA,CAAA,EAAU;IAEZ,OAAO,KAAKT,KAAL,CAAWS,IAAX,CAAgB,GAAAd,SAAhB,CAAP;EACD;EAEDe,WAAWA,CAAA,EAAU;IACnB,KAAKV,KAAL,CAAWU,WAAX,CAAuB,GAAAf,SAAvB;IACA,OAAO,IAAP;EACD;EAEDgB,aAAaA,CAAA,EAAU;IACrB,KAAKX,KAAL,CAAWW,aAAX,CAAyB,GAAAhB,SAAzB;IACA,OAAO,IAAP;EACD;EAEDiB,oBAAoBA,CAAA,EAAU;IAC5B,KAAKZ,KAAL,CAAWY,oBAAX,CAAgC,GAAAjB,SAAhC;IACA,OAAO,IAAP;EACD;EAIDM,kBAAkBA,CAACP,KAAD,EAAQ;IACxB,KAAKM,KAAL,CAAWI,QAAX,CAAoBV,KAApB;EACD;AAjEmD"},"metadata":{},"sourceType":"module"}