{"ast":null,"code":"var _jsxFileName = \"/Users/stefanhall/Documents/Employment/Zoomo/Git/repos/fms-dashboard-dev/mapbox-learn/src/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport geoJson from './sydney-parks.json';\nimport vehicleData from './vehicleData.json';\nimport './Map.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = 'pk.eyJ1Ijoic3RlZmFuZHMiLCJhIjoiY2xpbDhieGVsMDJ6cDNkcnRlZHd1Mm9oMCJ9.e2hVvAkDhSwaGmT9jCl83w';\nexport default function App() {\n  _s();\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [popup, setPopup] = useState(null);\n  const minLat = Math.min(...vehicleData.map(data => data.lat));\n  const maxLat = Math.max(...vehicleData.map(data => data.lat));\n  const minLon = Math.min(...vehicleData.map(data => data.lon));\n  const maxLon = Math.max(...vehicleData.map(data => data.lon));\n  const boundingBox = [[minLon, minLat], [maxLon, maxLat]];\n  useEffect(() => {\n    if (map.current) return;\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v12'\n    });\n    map.current.on('load', () => {\n      map.current.fitBounds(boundingBox, {\n        padding: 20\n      });\n      map.current.addImage('custom-marker', 'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png', {\n        sdf: 'true'\n      });\n      map.current.addSource('location-points', {\n        'type': 'geojson',\n        'data': {\n          'type': 'FeatureCollection',\n          'features': geoJson.features\n        }\n      });\n      map.current.addLayer({\n        'id': 'location-points',\n        'type': 'symbol',\n        'source': 'location-points',\n        'layout': {\n          'icon-image': 'custom-marker',\n          'icon-size': 0.5\n        }\n      });\n      vehicleData.forEach(vehicle => {\n        var el = document.createElement('div');\n        el.className = 'marker ' + vehicle.status;\n        const vehiclePopup = new mapboxgl.Popup({\n          offset: 25\n        }).setHTML(`\n          <h3>${vehicle.ZID}</h3>\n          <p>Status: ${vehicle.status}</p>\n          <p>Home: ${vehicle.home}</p>\n        `);\n        var marker = new mapboxgl.Marker(el).setLngLat([vehicle.lon, vehicle.lat]).setPopup(vehiclePopup).addTo(map.current);\n        el.addEventListener('mouseenter', () => vehiclePopup.addTo(map.current));\n        el.addEventListener('mouseleave', () => {\n          if (popup !== vehiclePopup) {\n            vehiclePopup.remove();\n          }\n        });\n        el.addEventListener('click', () => {\n          if (popup) {\n            popup.remove();\n          }\n          setPopup(vehiclePopup);\n        });\n      });\n    });\n    return () => map.current.remove();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      className: \"map-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"lTVGjOxmakqjbMq29oTwstayFxk=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useEffect","useState","mapboxgl","geoJson","vehicleData","jsxDEV","_jsxDEV","accessToken","App","_s","mapContainer","map","popup","setPopup","minLat","Math","min","data","lat","maxLat","max","minLon","lon","maxLon","boundingBox","current","Map","container","style","on","fitBounds","padding","addImage","sdf","addSource","features","addLayer","forEach","vehicle","el","document","createElement","className","status","vehiclePopup","Popup","offset","setHTML","ZID","home","marker","Marker","setLngLat","addTo","addEventListener","remove","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/stefanhall/Documents/Employment/Zoomo/Git/repos/fms-dashboard-dev/mapbox-learn/src/Map.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\n\nimport geoJson from './sydney-parks.json';\nimport vehicleData from './vehicleData.json';\n\nimport './Map.css';\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoic3RlZmFuZHMiLCJhIjoiY2xpbDhieGVsMDJ6cDNkcnRlZHd1Mm9oMCJ9.e2hVvAkDhSwaGmT9jCl83w';\n\nexport default function App() {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n\n  const [popup, setPopup] = useState(null);\n\n  const minLat = Math.min(...vehicleData.map(data => data.lat));\n  const maxLat = Math.max(...vehicleData.map(data => data.lat));\n  const minLon = Math.min(...vehicleData.map(data => data.lon));\n  const maxLon = Math.max(...vehicleData.map(data => data.lon));\n\n  const boundingBox = [[minLon, minLat], [maxLon, maxLat]];\n\n  useEffect(() => {\n    if (map.current) return;\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v12'\n    });\n\n    map.current.on('load', () => {\n      map.current.fitBounds(boundingBox, { padding: 20 });\n\n      map.current.addImage(\n        'custom-marker',\n        'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',\n        { sdf: 'true' }\n      );\n\n      map.current.addSource('location-points', {\n        'type': 'geojson',\n        'data': {\n          'type': 'FeatureCollection',\n          'features': geoJson.features,\n        },\n      });\n\n      map.current.addLayer({\n        'id': 'location-points',\n        'type': 'symbol',\n        'source': 'location-points',\n        'layout': {\n          'icon-image': 'custom-marker',\n          'icon-size': 0.5\n        }\n      });\n\n      vehicleData.forEach(vehicle => {\n        var el = document.createElement('div');\n        el.className = 'marker ' + vehicle.status;\n\n        const vehiclePopup = new mapboxgl.Popup({ offset: 25 })\n          .setHTML(`\n          <h3>${vehicle.ZID}</h3>\n          <p>Status: ${vehicle.status}</p>\n          <p>Home: ${vehicle.home}</p>\n        `);\n\n        var marker = new mapboxgl.Marker(el)\n          .setLngLat([vehicle.lon, vehicle.lat])\n          .setPopup(vehiclePopup)\n          .addTo(map.current);\n\n        el.addEventListener('mouseenter', () => vehiclePopup.addTo(map.current));\n        el.addEventListener('mouseleave', () => {\n          if (popup !== vehiclePopup) {\n            vehiclePopup.remove();\n          }\n        });\n        el.addEventListener('click', () => {\n          if (popup) {\n            popup.remove();\n          }\n          setPopup(vehiclePopup);\n        });\n      });\n    });\n\n    return () => map.current.remove();\n  }, []);\n\n  return (\n    <div>\n      <div ref={mapContainer} className=\"map-container\" />\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}